const game = require("../src/handfoot/game");
const action = require("../src/handfoot/action");
const team = require("../src/handfoot/team");
const db = require("../src/handfoot/db");
const player = require("../src/handfoot/player");
const doaction = require("../src/doaction");

async function doTest() {
    // var gameId = "123-456";
    // var userId = "p-765-432";
    // var connectionId = "12341723472314";
    // var name;
    // var action = "start";

    // await game.connect(gameId, userId, connectionId, name, action);
    // name = "Bob";
    // await game.connect(gameId, userId, connectionId, name);

    // var data = await game.getState(gameId);
    // console.log(data);

    var eventData, postDatas;
    // var eventData = {"message":"doaction","game":"123-456","userid":"o-24d-7db","action":"saveTeams","value":[{"index":0,"teamid":"t-dbd-1b0","ids":[{"index":0,"id":"p-6af-aff"},{"index":1,"id":"p-28f-aa9"}]}]};
    // var teams = await team.save(eventData.game, eventData.value);
    // postDatas = [{ "info": "teams", "to": "all", "data": teams }];
    // var state = await game.getState(eventData.game);
    // postDatas.push({ "info": "state", "to": "all", "data": state });
    // console.log(postDatas);

    //eventData = {"message":"doaction","game":"debug","action":"_DELETE_GAME_","value":"123-456"};
    //await game.deleteGameData(eventData.value);

    /** CREATE SNAPSHOT */
    // var gameId = "224-812";
    // eventData = { "message": "doaction", "game": "debug", "action": "_SNAPSHOT_", "value": gameId };
    // var n = await game.createSnapshot(eventData.value);
    
    /** GET SNAPSHOT DATA */
    // var d = await db.getData(gameId, n.toString());
    // console.log(JSON.stringify(d.data));
    // await db.deleteData(gameId, n.toString());
    
    /** SET GAME DATA */
    //var d = [{"gameId":"224-812","subId":"tables","tables":["tables","224-812","p-571-271","p-495-270","p-690-435","p-255-350","p-915-976","p-132-080","t-983-379","t-507-218","t-384-601","1588276386801"]},{"subId":"224-812","gameId":"224-812","drawPile":[{"name":"10","id":89,"suit":"C","idx":200},{"name":"6","id":342,"suit":"D","idx":201},{"name":"10","id":238,"suit":"D","idx":202},{"name":"A","id":229,"suit":"D","idx":203},{"name":"5","id":300,"suit":"C","idx":204},{"name":"5","id":112,"suit":"H","idx":205},{"name":"10","id":346,"suit":"D","idx":206},{"name":"10","id":117,"suit":"H","idx":207},{"name":"7","id":45,"suit":"S","idx":208},{"name":"4","id":111,"suit":"H","idx":209},{"name":"9","id":278,"suit":"H","idx":210},{"name":"J","id":64,"suit":"H","idx":211},{"name":"7","id":60,"suit":"H","idx":212},{"name":"3","id":231,"suit":"D","idx":213},{"name":"5","id":58,"suit":"H","idx":214},{"name":"4","id":70,"suit":"D","idx":215},{"name":"10","id":333,"suit":"H","idx":216},{"name":"J","id":226,"suit":"H","idx":217},{"name":"3","id":69,"suit":"D","idx":218},{"name":"7","id":248,"suit":"C","idx":219},{"name":"K","id":92,"suit":"C","idx":220},{"name":"10","id":264,"suit":"S","idx":221},{"name":"9","id":88,"suit":"C","idx":222},{"name":"K","id":336,"suit":"H","idx":223},{"name":"A","id":216,"suit":"H","idx":224},{"name":"10","id":318,"suit":"S","idx":225},{"name":"A","id":67,"suit":"D","idx":226},{"name":"5","id":17,"suit":"D","idx":227},{"name":"6","id":314,"suit":"S","idx":228},{"name":"9","id":317,"suit":"S","idx":229},{"name":"J","id":322,"suit":null,"idx":230},{"name":"7","id":235,"suit":"D","idx":231},{"name":"2","id":14,"suit":"D","idx":232},{"name":"A","id":255,"suit":"S","idx":233},{"name":"2","id":364,"suit":"S","idx":234},{"name":"J","id":36,"suit":"C","idx":235},{"name":"7","id":194,"suit":"C","idx":236},{"name":"A","id":201,"suit":"S","idx":237},{"name":"K","id":146,"suit":"C","idx":238},{"name":"A","id":283,"suit":"D","idx":239},{"name":"J","id":161,"suit":null,"idx":240},{"name":"4","id":29,"suit":"C","idx":241},{"name":"9","id":75,"suit":"D","idx":242},{"name":"K","id":295,"suit":"D","idx":243},{"name":"6","id":180,"suit":"D","idx":244},{"name":"9","id":263,"suit":"S","idx":245},{"name":"K","id":321,"suit":"S","idx":246},{"name":"A","id":39,"suit":"S","idx":247},{"name":"6","id":85,"suit":"C","idx":248},{"name":"Q","id":335,"suit":"H","idx":249},{"name":"2","id":163,"suit":"H","idx":250},{"name":"J","id":10,"suit":"H","idx":251},{"name":"10","id":251,"suit":"C","idx":252},{"name":"Q","id":240,"suit":"D","idx":253},{"name":"K","id":213,"suit":"S","idx":254},{"name":"Q","id":91,"suit":"C","idx":255},{"name":"J","id":215,"suit":null,"idx":256},{"name":"A","id":147,"suit":"S","idx":257},{"name":"7","id":289,"suit":"D","idx":258},{"name":"4","id":96,"suit":"S","idx":259},{"name":"10","id":225,"suit":"H","idx":260},{"name":"8","id":128,"suit":"D","idx":261},{"name":"A","id":0,"suit":"H","idx":262},{"name":"J","id":293,"suit":"D","idx":263},{"name":"Q","id":199,"suit":"C","idx":264},{"name":"7","id":168,"suit":"H","idx":265},{"name":"10","id":48,"suit":"S","idx":266},{"name":"2","id":189,"suit":"C","idx":267},{"name":"Q","id":374,"suit":"S","idx":268},{"name":"8","id":46,"suit":"S","idx":269},{"name":"8","id":344,"suit":"D","idx":270},{"name":"3","id":56,"suit":"H","idx":271},{"name":"8","id":208,"suit":"S","idx":272},{"name":"4","id":327,"suit":"H","idx":273},{"name":"3","id":2,"suit":"H","idx":274},{"name":"9","id":358,"suit":"C","idx":275},{"name":"4","id":286,"suit":"D","idx":276},{"name":"3","id":110,"suit":"H","idx":277},{"name":"8","id":277,"suit":"H","idx":278},{"name":"K","id":241,"suit":"D","idx":279},{"name":"9","id":129,"suit":"D","idx":280},{"name":"9","id":224,"suit":"H","idx":281},{"name":"5","id":313,"suit":"S","idx":282},{"name":"K","id":349,"suit":"D","idx":283},{"name":"K","id":267,"suit":"S","idx":284},{"name":"7","id":86,"suit":"C","idx":285},{"name":"4","id":204,"suit":"S","idx":286},{"name":"10","id":63,"suit":"H","idx":287},{"name":"4","id":3,"suit":"H","idx":288},{"name":"5","id":71,"suit":"D","idx":289},{"name":"7","id":369,"suit":"S","idx":290},{"name":"K","id":25,"suit":"D","idx":291},{"name":"J","id":185,"suit":"D","idx":292},{"name":"9","id":209,"suit":"S","idx":293},{"name":"8","id":74,"suit":"D","idx":294},{"name":"6","id":72,"suit":"D","idx":295},{"name":"J","id":376,"suit":null,"idx":296},{"name":"8","id":316,"suit":"S","idx":297},{"name":"J","id":131,"suit":"D","idx":298},{"name":"6","id":206,"suit":"S","idx":299},{"name":"6","id":288,"suit":"D","idx":300},{"name":"Q","id":132,"suit":"D","idx":301},{"name":"6","id":355,"suit":"C","idx":302},{"name":"J","id":280,"suit":"H","idx":303},{"name":"8","id":223,"suit":"H","idx":304},{"name":"10","id":102,"suit":"S","idx":305},{"name":"3","id":203,"suit":"S","idx":306},{"name":"5","id":367,"suit":"S","idx":307},{"name":"A","id":337,"suit":"D","idx":308},{"name":"Q","id":119,"suit":"H","idx":309},{"name":"7","id":222,"suit":"H","idx":310},{"name":"8","id":33,"suit":"C","idx":311},{"name":"3","id":285,"suit":"D","idx":312},{"name":"K","id":120,"suit":"H","idx":313},{"name":"4","id":165,"suit":"H","idx":314},{"name":"Q","id":186,"suit":"D","idx":315},{"name":"A","id":134,"suit":"C","idx":316},{"name":"2","id":284,"suit":"D","idx":317},{"name":"8","id":141,"suit":"C","idx":318},{"name":"5","id":97,"suit":"S","idx":319},{"name":"7","id":19,"suit":"D","idx":320},{"name":"Q","id":294,"suit":"D","idx":321},{"name":"K","id":362,"suit":"C","idx":322},{"name":"8","id":262,"suit":"S","idx":323},{"name":"9","id":21,"suit":"D","idx":324},{"name":"Q","id":266,"suit":"S","idx":325},{"name":"5","id":43,"suit":"S","idx":326},{"name":"5","id":328,"suit":"H","idx":327},{"name":"3","id":15,"suit":"D","idx":328},{"name":"5","id":205,"suit":"S","idx":329},{"name":"6","id":329,"suit":"H","idx":330},{"name":"K","id":308,"suit":"C","idx":331},{"name":"J","id":160,"suit":null,"idx":332},{"name":"4","id":299,"suit":"C","idx":333},{"name":"8","id":87,"suit":"C","idx":334},{"name":"10","id":210,"suit":"S","idx":335},{"name":"K","id":105,"suit":"S","idx":336},{"name":"5","id":138,"suit":"C","idx":337},{"name":"4","id":150,"suit":"S","idx":338},{"name":"6","id":301,"suit":"C","idx":339},{"name":"J","id":319,"suit":"S","idx":340},{"name":"3","id":244,"suit":"C","idx":341},{"name":"Q","id":361,"suit":"C","idx":342},{"name":"7","id":99,"suit":"S","idx":343},{"name":"A","id":270,"suit":"H","idx":344},{"name":"6","id":139,"suit":"C","idx":345},{"name":"5","id":30,"suit":"C","idx":346},{"name":"4","id":124,"suit":"D","idx":347},{"name":"Q","id":320,"suit":"S","idx":348},{"name":"2","id":351,"suit":"C","idx":349},{"name":"3","id":82,"suit":"C","idx":350},{"name":"A","id":162,"suit":"H","idx":351},{"name":"7","id":261,"suit":"S","idx":352},{"name":"7","id":114,"suit":"H","idx":353},{"name":"3","id":365,"suit":"S","idx":354},{"name":"4","id":312,"suit":"S","idx":355},{"name":"10","id":292,"suit":"D","idx":356},{"name":"9","id":34,"suit":"C","idx":357},{"name":"9","id":155,"suit":"S","idx":358},{"name":"A","id":54,"suit":"H","idx":359},{"name":"J","id":268,"suit":null,"idx":360},{"name":"5","id":287,"suit":"D","idx":361},{"name":"J","id":198,"suit":"C","idx":362},{"name":"K","id":282,"suit":"H","idx":363},{"name":"9","id":116,"suit":"H","idx":364},{"name":"Q","id":253,"suit":"C","idx":365},{"name":"8","id":195,"suit":"C","idx":366},{"name":"J","id":306,"suit":"C","idx":367},{"name":"10","id":143,"suit":"C","idx":368},{"name":"2","id":217,"suit":"H","idx":369},{"name":"6","id":275,"suit":"H","idx":370},{"name":"4","id":245,"suit":"C","idx":371},{"name":"7","id":276,"suit":"H","idx":372},{"name":"3","id":190,"suit":"C","idx":373},{"name":"J","id":172,"suit":"H","idx":374},{"name":"8","id":182,"suit":"D","idx":375},{"name":"2","id":243,"suit":"C","idx":376},{"name":"9","id":291,"suit":"D","idx":377}],"state":{"activeDrawer":null,"firstPlayer":"p-495-270","lastDrawer":"p-915-976","didDeal":["p-571-271","p-495-270","p-690-435","p-255-350","p-915-976","p-132-080"],"ready":true,"playerOut":null,"drawIndex":0,"shuffled":true,"lastMessage":"fdsa discarded 4H","activePlayer":{"name":"qwer","id":"p-690-435","inFoot":true},"teamsReady":true},"created":1588274317729,"playOrder":["p-571-271","p-495-270","p-690-435","p-255-350","p-915-976","p-132-080"]},{"gameId":"224-812","canDraw":false,"lastDrawIndex":191,"inFoot":true,"subId":"p-571-271","partner":"p-255-350","teamIdx":0,"teamid":"t-983-379","name":"asdf","connectionId":"L0KmQeQWiYcCI3A=","foot":[],"didDraw":false,"hand":[{"name":"6","id":247,"suit":"C","idx":21},{"name":"6","id":5,"suit":"H","idx":179},{"name":"6","id":260,"suit":"S","idx":191}]},{"gameId":"224-812","canDraw":false,"lastDrawIndex":193,"inFoot":false,"subId":"p-495-270","partner":"p-915-976","teamIdx":1,"teamid":"t-507-218","name":"fdsa","connectionId":"L0KmyeQfCYcCI3A=","foot":[{"name":"K","id":254,"suit":"C","idx":23},{"name":"J","id":334,"suit":"H","idx":25},{"name":"3","id":311,"suit":"S","idx":27},{"name":"2","id":81,"suit":"C","idx":29},{"name":"Q","id":281,"suit":"H","idx":31},{"name":"5","id":84,"suit":"C","idx":33},{"name":"2","id":109,"suit":"H","idx":35},{"name":"Q","id":212,"suit":"S","idx":37},{"name":"5","id":259,"suit":"S","idx":39},{"name":"7","id":32,"suit":"C","idx":41},{"name":"10","id":9,"suit":"H","idx":43}],"didDraw":false,"hand":[{"name":"Q","id":173,"suit":"H","idx":144},{"name":"Q","id":11,"suit":"H","idx":181}]},{"gameId":"224-812","canDraw":false,"lastDrawIndex":195,"inFoot":true,"subId":"p-690-435","partner":"p-132-080","teamIdx":2,"teamid":"t-384-601","name":"qwer","connectionId":"L0Knbe4UiYcAbKw=","foot":[],"didDraw":true,"hand":[{"name":"7","id":73,"suit":"D","idx":55}]},{"gameId":"224-812","canDraw":false,"lastDrawIndex":197,"inFoot":false,"subId":"p-255-350","partner":"p-571-271","teamIdx":0,"teamid":"t-983-379","name":"rewq","connectionId":"L0KoGcBLiYcCFOQ=","foot":[{"name":"3","id":352,"suit":"C","idx":67},{"name":"J","id":269,
    //"suit":null,"idx":69},{"name":"Q","id":158,"suit":"S","idx":71},{"name":"4","id":83,"suit":"C","idx":73},{"name":"J","id":211,"suit":"S","idx":75},{"name":"4","id":191,"suit":"C","idx":77},{"name":"3","id":326,"suit":"H","idx":79},{"name":"K","id":375,"suit":"S","idx":81},{"name":"3","id":28,"suit":"C","idx":83},{"name":"J","id":77,"suit":"D","idx":85},{"name":"9","id":304,"suit":"C","idx":87}],"didDraw":true,"hand":[{"name":"K","id":38,"suit":"C","idx":149},{"name":"9","id":332,"suit":"H","idx":196},{"name":"A","id":26,"suit":"C","idx":197}]},{"gameId":"224-812","canDraw":false,"lastDrawIndex":199,"inFoot":true,"subId":"p-915-976","partner":"p-495-270","teamIdx":1,"teamid":"t-507-218","name":"zxcv","connectionId":"L0KpAd_piYcCIzg=","foot":[],"didDraw":true,"hand":[{"name":"J","id":53,"suit":null,"idx":89},{"name":"A","id":324,"suit":"H","idx":91},{"name":"8","id":331,"suit":"H","idx":93},{"name":"8","id":7,"suit":"H","idx":95},{"name":"J","id":239,"suit":"D","idx":97},{"name":"3","id":272,"suit":"H","idx":99},{"name":"9","id":371,"suit":"S","idx":101},{"name":"K","id":133,"suit":"D","idx":103},{"name":"3","id":149,"suit":"S","idx":105},{"name":"J","id":265,"suit":"S","idx":107},{"name":"7","id":6,"suit":"H","idx":109},{"name":"10","id":156,"suit":"S","idx":198},{"name":"9","id":237,"suit":"D","idx":199}]},{"gameId":"224-812","canDraw":false,"lastDrawIndex":189,"inFoot":true,"subId":"p-132-080","partner":"p-690-435","teamIdx":2,"teamid":"t-384-601","name":"vcxz","connectionId":"L0Kp1cepiYcCE1g=","foot":[],"didDraw":false,"hand":[{"name":"A","id":363,"suit":"S","idx":127},{"name":"K","id":66,"suit":"H","idx":131}]},{"subId":"t-983-379","gameId":"224-812","score":1210,"cards":{"4":[],"5":[{"name":"5","id":179,"suit":"D","idx":86},{"name":"5","id":220,"suit":"H","idx":72},{"name":"5","id":166,"suit":"H","idx":70},{"name":"5","id":4,"suit":"H","idx":178},{"name":"5","id":274,"suit":"H","idx":19}],"6":[],"7":[{"name":"7","id":207,"suit":"S","idx":68},{"name":"7","id":315,"suit":"S","idx":137},{"name":"2","id":135,"suit":"C","idx":76},{"name":"7","id":181,"suit":"D","idx":4},{"name":"2","id":297,"suit":"C","idx":154},{"name":"7","id":330,"suit":"H","idx":172},{"name":"7","id":302,"suit":"C","idx":7},{"name":"7","id":356,"suit":"C","idx":11}],"8":[{"name":"8","id":303,"suit":"C","idx":155},{"name":"8","id":169,"suit":"H","idx":14},{"name":"8","id":290,"suit":"D","idx":16},{"name":"8","id":249,"suit":"C","idx":166},{"name":"8","id":154,"suit":"S","idx":185}],"9":[],"10":[{"name":"10","id":171,"suit":"H","idx":74},{"name":"10","id":76,"suit":"D","idx":148},{"name":"2","id":94,"suit":"S","idx":136},{"name":"10","id":184,"suit":"D","idx":10},{"name":"J","id":106,"suit":null,"idx":142},{"name":"10","id":359,"suit":"C","idx":184}],"Q":[{"name":"Q","id":104,"suit":"S","idx":190},{"name":"Q","id":37,"suit":"C","idx":15},{"name":"Q","id":348,"suit":"D","idx":9}],"A":[{"name":"A","id":13,"suit":"D","idx":6},{"name":"A","id":242,"suit":"C","idx":143},{"name":"J","id":214,"suit":null,"idx":18},{"name":"A","id":80,"suit":"C","idx":173},{"name":"A","id":175,"suit":"D","idx":84},{"name":"A","id":188,"suit":"C","idx":17},{"name":"A","id":108,"suit":"H","idx":13},{"name":"A","id":350,"suit":"C","idx":1}],"W":[],"J":[{"name":"J","id":103,"suit":"S","idx":0},{"name":"J","id":49,"suit":"S","idx":8},{"name":"J","id":377,"suit":null,"idx":2},{"name":"J","id":360,"suit":"C","idx":80}],"K":[]},"scores":[{"round":1,"scores":[{"dirty":["8","10"],"score":600,"type":"base","clean":[]},{"type":"playedCards","score":635,"cards":[{"name":"4","id":219,"suit":"H","idx":83},{"name":"4","id":29,"suit":"C","idx":73},{"name":"J","id":268,"suit":null,"idx":174},{"name":"4","id":273,"suit":"H","idx":9},{"name":"5","id":125,"suit":"D","idx":12},{"name":"5","id":17,"suit":"D","idx":14},{"name":"5","id":354,"suit":"C","idx":132},{"name":"5","id":166,"suit":"H","idx":138},{"name":"5","id":138,"suit":"C","idx":150},{"name":"5","id":233,"suit":"D","idx":7},{"name":"6","id":139,"suit":"C","idx":186},{"name":"6","id":355,"suit":"C","idx":187},{"name":"2","id":148,"suit":"S","idx":175},{"name":"7","id":19,"suit":"D","idx":18},{"name":"7","id":45,"suit":"S","idx":6},{"name":"7","id":222,"suit":"H","idx":133},{"name":"7","id":261,"suit":"S","idx":157},{"name":"7","id":276,"suit":"H","idx":77},{"name":"7","id":302,"suit":"C","idx":85},{"name":"8","id":141,"suit":"C","idx":20},{"name":"8","id":128,"suit":"D","idx":4},{"name":"J","id":160,"suit":null,"idx":2},{"name":"8","id":344,"suit":"D","idx":86},{"name":"8","id":277,"suit":"H","idx":80},{"name":"8","id":61,"suit":"H","idx":78},{"name":"8","id":316,"suit":"S","idx":74},{"name":"8","id":7,"suit":"H","idx":162},{"name":"8","id":46,"suit":"S","idx":163},{"name":"8","id":249,"suit":"C","idx":71},{"name":"8","id":208,"suit":"S","idx":5},{"name":"9","id":101,"suit":"S","idx":181},{"name":"9","id":263,"suit":"S","idx":19},{"name":"9","id":224,"suit":"H","idx":1},{"name":"10","id":63,"suit":"H","idx":139},{"name":"10","id":372,"suit":"S","idx":82},{"name":"J","id":269,"suit":null,"idx":151},{"name":"10","id":156,"suit":"S","idx":10},{"name":"10","id":225,"suit":"H","idx":8},{"name":"10","id":305,"suit":"C","idx":69},{"name":"10","id":184,"suit":"D","idx":79},{"name":"A","id":162,"suit":"H","idx":168},{"name":"A","id":283,"suit":"D","idx":144},{"name":"A","id":121,"suit":"D","idx":16},{"name":"A","id":39,"suit":"S","idx":87},{"name":"A","id":0,"suit":"H","idx":15},{"name":"J","id":347,"suit":"D","idx":66},{"name":"J","id":90,"suit":"C","idx":70},{"name":"J","id":373,"suit":"S","idx":72},{"name":"J","id":226,"suit":"H","idx":180},{"name":"K","id":133,"suit":"D","idx":17},{"name":"K","id":120,"suit":"H","idx":11},{"name":"2","id":217,"suit":"H","idx":13},{"name":"K","id":241,"suit":"D","idx":192}]},{"type":"hand-asdf","score":-5,"cards":[{"name":"6","id":260,"suit":"S","idx":21}]},{"type":"hand-rewq","score":-20,"cards":[{"name":"2","id":68,"suit":"D","idx":81}]},{"type":"foot-asdf","score":0,"cards":[]},{"type":"foot-rewq","score":0,"cards":[]}]}],"index":0,"cardCt":[3,3],"playerNames":["asdf","rewq"],"playerIds":["p-571-271","p-255-350"],"melded":true,"inFoot":["p-571-271"]},{"subId":"t-507-218","gameId":"224-812","score":1975,"cards":{"4":[],"5":[{"name":"5","id":233,"suit":"D","idx":138},{"name":"5","id":151,"suit":"S","idx":102},{"name":"5","id":341,"suit":"D","idx":96},{"name":"5","id":125,"suit":"D","idx":174},{"name":"5","id":246,"suit":"C","idx":186}],"6":[{"name":"6","id":59,"suit":"H","idx":150},{"name":"6","id":18,"suit":"D","idx":139},{"name":"6","id":31,"suit":"C","idx":108},{"name":"6","id":234,"suit":"D","idx":175}],"7":[{"name":"7","id":127,"suit":"D","idx":34},{"name":"7","id":343,"suit":"D","idx":30},{"name":"J","id":107,"suit":null,"idx":168}],"8":[],"9":[{"name":"9","id":142,"suit":"C","idx":133},{"name":"9","id":250,"suit":"C","idx":38},{"name":"9","id":62,"suit":"H","idx":28}],"10":[],"Q":[],"A":[{"name":"A","id":93,"suit":"S","idx":88},{"name":"A","id":296,"suit":"C","idx":106},{"name":"2","id":148,"suit":"S","idx":100},{"name":"A","id":121,"suit":"D","idx":26},{"name":"A","id":309,"suit":"S","idx":156},{"name":"2","id":338,"suit":"D","idx":104},{"name":"J","id":52,"suit":null,"idx":193}],"W":[],"J":[{"name":"J","id":144,"suit":"C","idx":132},{"name":"J","id":347,"suit":"D","idx":36},{"name":"J","id":373,"suit":"S","idx":24},{"name":"J","id":252,"suit":"C","idx":187}],"K":[{"name":"K","id":200,"suit":"C","idx":157},{"name":"K","id":174,"suit":"H","idx":42},{"name":"K","id":159,"suit":"S","idx":40},{"name":"K","id":12,"suit":"H","idx":163},{"name":"K","id":187,"suit":"D","idx":90}]},"scores":[{"round":1,"scores":[{"dirty":["4","8","J"],"score":1400,"type":"base","clean":["5"]},{"type":"playedCards","score":585,"cards":[{"name":"4","id":204,"suit":"S","idx":104},{"name":"4","id":327,"suit":"H","idx":100},{"name":"2","id":310,"suit":"S","idx":176},{"name":"4","id":3,"suit":"H","idx":29},{"name":"4","id":111,"suit":"H","idx":188},{"name":"4","id":299,"suit":"C","idx":103},{"name":"4","id":124,"suit":"D","idx":89},{"name":"5","id":313,"suit":"S","idx":153},{"name":"5","id":30,"suit":"C","idx":98},{"name":"5","id":192,"suit":"C","idx":94},{"name":"5","id":71,"suit":"D","idx":88},{"name":"5","id":112,"suit":"H","idx":135},{"name":"5","id":367,"suit":"S","idx":30},{"name":"5","id":287,"suit":"D","idx":35},{"name":"5","id":259,"suit":"S","idx":194},{"name":"6","id":126,"suit":"D","idx":28},{"name":"6","id":221,"suit":"H","idx":147},{"name":"2","id":271,"suit":"H","idx":40},{"name":"6","id":314,"suit":"S","idx":102},{"name":"8","id":115,"suit":"H","idx":24},{"name":"8","id":195,"suit":"C","idx":22},{"name":"J","id":376,"suit":null,"idx":146},{"name":"8","id":87,"suit":"C","idx":140},{"name":"2","id":297,"suit":"C","idx":170},{"name":"8","id":169,"suit":"H","idx":182},{"name":"8","id":33,"suit":"C","idx":33},{"name":"8","id":370,"suit":"S","idx":189},{"name":"8","id":236,"suit":"D","idx":195},{"name":"9","id":62,"suit":"H","idx":36},{"name":"9","id":183,"suit":"D","idx":134},{"name":"9","id":8,"suit":"H","idx":159},{"name":"9","id":209,"suit":"S","idx":141},{"name":"9","id":129,"suit":"D","idx":105},{"name":"10","id":251,"suit":"C","idx":177},{"name":"10","id":76,"suit":"D","idx":164},{"name":"10","id":48,"suit":"S","idx":108},{"name":"10","id":359,"suit":"C","idx":99},{"name":"Q","id":281,"suit":"H","idx":43},{"name":"Q","id":91,"suit":"C","idx":31},{"name":"Q","id":186,"suit":"D","idx":27},{"name":"A","id":201,"suit":"S","idx":23},{"name":"A","id":296,"suit":"C","idx":39},{"name":"2","id":256,"suit":"S","idx":41},{"name":"A","id":175,"suit":"D","idx":90},{"name":"A","id":363,"suit":"S","idx":107},{"name":"A","id":67,"suit":"D","idx":93},{"name":"J","id":172,"suit":"H","idx":32},{"name":"J","id":252,"suit":"C","idx":42},{"name":"J","id":319,"suit":"S","idx":158},{"name":"J","id":64,"suit":"H","idx":152},{"name":"J","id":185,"suit":"D","idx":37},{"name":"J","id":239,"suit":"D","idx":91},{"name":"J",
    //"id":211,"suit":"S","idx":97},{"name":"J","id":118,"suit":"H","idx":95}]},{"type":"hand-fdsa","score":0,"cards":[]},{"type":"hand-zxcv","score":-10,"cards":[{"name":"K","id":174,"suit":"H","idx":101}]},{"type":"foot-fdsa","score":0,"cards":[]},{"type":"foot-zxcv","score":0,"cards":[]}]}],"index":1,"cardCt":[2,13],"playerNames":["fdsa","zxcv"],"playerIds":["p-495-270","p-915-976"],"melded":true,"inFoot":["p-915-976"]},{"subId":"t-384-601","gameId":"224-812","score":1180,"cards":{"4":[{"name":"4","id":273,"suit":"H","idx":62},{"name":"4","id":219,"suit":"H","idx":44},{"name":"2","id":27,"suit":"C","idx":56},{"name":"4","id":340,"suit":"D","idx":164},{"name":"4","id":137,"suit":"C","idx":119},{"name":"4","id":16,"suit":"D","idx":45},{"name":"2","id":55,"suit":"H","idx":195}],"5":[],"6":[{"name":"6","id":368,"suit":"S","idx":147},{"name":"2","id":40,"suit":"S","idx":52},{"name":"6","id":113,"suit":"H","idx":60},{"name":"6","id":98,"suit":"S","idx":130},{"name":"6","id":221,"suit":"H","idx":124},{"name":"2","id":1,"suit":"H","idx":110},{"name":"6","id":167,"suit":"H","idx":171},{"name":"6","id":152,"suit":"S","idx":65},{"name":"6","id":193,"suit":"C","idx":63},{"name":"6","id":44,"suit":"S","idx":53}],"7":[],"8":[{"name":"8","id":115,"suit":"H","idx":128},{"name":"8","id":20,"suit":"D","idx":116},{"name":"8","id":236,"suit":"D","idx":112},{"name":"8","id":61,"suit":"H","idx":123},{"name":"8","id":370,"suit":"S","idx":194}],"9":[{"name":"9","id":8,"suit":"H","idx":165},{"name":"9","id":170,"suit":"H","idx":114},{"name":"2","id":176,"suit":"D","idx":118},{"name":"9","id":183,"suit":"D","idx":158},{"name":"9","id":101,"suit":"S","idx":51},{"name":"9","id":47,"suit":"S","idx":49},{"name":"9","id":345,"suit":"D","idx":189}],"10":[{"name":"10","id":22,"suit":"D","idx":135},{"name":"10","id":130,"suit":"D","idx":54},{"name":"2","id":202,"suit":"S","idx":46},{"name":"10","id":279,"suit":"H","idx":120},{"name":"10","id":372,"suit":"S","idx":176},{"name":"10","id":305,"suit":"C","idx":121},{"name":"10","id":197,"suit":"C","idx":111},{"name":"10","id":35,"suit":"C","idx":57}],"Q":[{"name":"Q","id":78,"suit":"D","idx":126},{"name":"Q","id":50,"suit":"S","idx":140},{"name":"Q","id":307,"suit":"C","idx":141},{"name":"Q","id":65,"suit":"H","idx":170},{"name":"Q","id":24,"suit":"D","idx":183}],"A":[],"W":[{"name":"2","id":230,"suit":"D","idx":146},{"name":"2","id":122,"suit":"D","idx":64},{"name":"2","id":325,"suit":"H","idx":58},{"name":"J","id":323,"suit":null,"idx":125},{"name":"2","id":310,"suit":"S","idx":117},{"name":"2","id":68,"suit":"D","idx":115},{"name":"2","id":256,"suit":"S","idx":113}],"J":[{"name":"J","id":157,"suit":"S","idx":47},{"name":"J","id":118,"suit":"H","idx":61},{"name":"2","id":271,"suit":"H","idx":182},{"name":"J","id":90,"suit":"C","idx":177}],"K":[]},"scores":[{"round":1,"scores":[{"dirty":["10","K"],"score":1100,"type":"base","clean":["4"]},{"type":"playedCards","score":520,"cards":[{"name":"4","id":165,"suit":"H","idx":137},{"name":"4","id":178,"suit":"D","idx":52},{"name":"4","id":366,"suit":"S","idx":54},{"name":"4","id":96,"suit":"S","idx":128},{"name":"4","id":137,"suit":"C","idx":116},{"name":"4","id":83,"suit":"C","idx":190},{"name":"4","id":258,"suit":"S","idx":117},{"name":"5","id":4,"suit":"H","idx":185},{"name":"5","id":246,"suit":"C","idx":60},{"name":"5","id":328,"suit":"H","idx":48},{"name":"9","id":345,"suit":"D","idx":154},{"name":"9","id":88,"suit":"C","idx":120},{"name":"2","id":176,"suit":"D","idx":155},{"name":"10","id":318,"suit":"S","idx":143},{"name":"10","id":22,"suit":"D","idx":114},{"name":"2","id":14,"suit":"D","idx":130},{"name":"10","id":210,"suit":"S","idx":149},{"name":"10","id":9,"suit":"H","idx":62},{"name":"10","id":238,"suit":"D","idx":178},{"name":"2","id":284,"suit":"D","idx":167},{"name":"10","id":197,"suit":"C","idx":119},{"name":"10","id":346,"suit":"D","idx":127},{"name":"A","id":242,"suit":"C","idx":122},{"name":"A","id":270,"suit":"H","idx":110},{"name":"J","id":107,"suit":null,"idx":142},{"name":"A","id":255,"suit":"S","idx":136},{"name":"A","id":26,"suit":"C","idx":125},{"name":"J","id":53,"suit":null,"idx":129},{"name":"J","id":131,"suit":"D","idx":148},{"name":"J","id":306,"suit":"C","idx":58},{"name":"2","id":27,"suit":"C","idx":184},{"name":"J","id":144,"suit":"C","idx":121},{"name":"K","id":321,"suit":"S","idx":46},{"name":"K","id":308,"suit":"C","idx":50},{"name":"2","id":163,"suit":"H","idx":64},{"name":"K","id":38,"suit":"C","idx":179},{"name":"2","id":109,"suit":"H","idx":166},{"name":"K","id":213,"suit":"S","idx":113},{"name":"K","id":336,"suit":"H","idx":131}]},{"type":"hand-qwer","score":-10,"cards":[{"name":"Q","id":294,"suit":"D","idx":161}]},{"type":"hand-vcxz","score":-20,"cards":[{"name":"6","id":44,"suit":"S","idx":115},{"name":"7","id":289,"suit":"D","idx":123},{"name":"8","id":290,"suit":"D","idx":191}]},{"type":"foot-qwer","score":-410,"cards":[{"name":"10","id":279,"suit":"H","idx":45},{"name":"Q","id":145,"suit":"C","idx":47},{"name":"6","id":247,"suit":"C","idx":49},{"name":"J","id":10,"suit":"H","idx":51},{"name":"3","id":164,"suit":"H","idx":53},{"name":"2","id":135,"suit":"C","idx":55},{"name":"2","id":325,"suit":"H","idx":57},{"name":"7","id":99,"suit":"S","idx":59},{"name":"K","id":146,"suit":"C","idx":61},{"name":"8","id":20,"suit":"D","idx":63},{"name":"K","id":349,"suit":"D","idx":65}]},{"type":"foot-vcxz","score":0,"cards":[]}]}],"index":2,"cardCt":[1,2],"playerNames":["qwer","vcxz"],"playerIds":["p-690-435","p-132-080"],"melded":true,"inFoot":["p-132-080","p-690-435"]}];
    //await game.setGameData(d);

    /** DISCARD */
    // eventData = { "message": "doaction", "game": "308-1d9", "userid": "p-707-6ba", "action": "discard", "value": { "name": "5", "id": 84, "suit": "C" } };
    // var hand = await player.discard(eventData.game, eventData.userid, eventData.value);
    // //console.log(hand);
    // postDatas = [{ "info": "playerHand", "to": eventData.userid, "data": hand }];
    // var state = await game.getState(eventData.game);
    // console.log(state);
    // if (state.playerOut == null) {
    //     //console.log("player NOT out");
    //     var t = await team.getByPlayer(eventData.game, eventData.userid);
    //     postDatas.push({ "info": "team", "to": "all", "data": t });
    // } else {
    //     //console.log("player IS out");
    //     postDatas.push({ "info": "state", "to": "all", "data": state });
    // }
    // //console.log(postDatas);



    /** SET GAME DATA */
    // d = [{ "gameId": "123-456", "subId": "tables", "tables": ["tables", "123-456", "o-4d5-1ea", "p-869-5b6", "p-995-09f", "t-a07-60a"] }, { "subId": "123-456", "gameId": "123-456", "drawPile": [{ "name": "A", "id": 0, "suit": "H" }, { "name": "10", "id": 89, "suit": "C" }, { "name": "10", "id": 143, "suit": "C" }, { "name": "4", "id": 29, "suit": "C" }, { "name": "J", "id": 53, "suit": null }, { "name": "Q", "id": 145, "suit": "C" }, { "name": "5", "id": 4, "suit": "H" }, { "name": "A", "id": 67, "suit": "D" }, { "name": "6", "id": 72, "suit": "D" }, { "name": "A", "id": 108, "suit": "H" }, { "name": "J", "id": 107, "suit": null }, { "name": "A", "id": 54, "suit": "H" }, { "name": "10", "id": 156, "suit": "S" }, { "name": "Q", "id": 78, "suit": "D" }, { "name": "9", "id": 129, "suit": "D" }, { "name": "2", "id": 14, "suit": "D" }, { "name": "J", "id": 131, "suit": "D" }, { "name": "10", "id": 48, "suit": "S" }, { "name": "Q", "id": 65, "suit": "H" }, { "name": "7", "id": 60, "suit": "H" }, { "name": "J", "id": 77, "suit": "D" }, { "name": "2", "id": 40, "suit": "S" }, { "name": "J", "id": 10, "suit": "H" }, { "name": "8", "id": 128, "suit": "D" }, { "name": "A", "id": 80, "suit": "C" }, { "name": "K", "id": 159, "suit": "S" }, { "name": "8", "id": 61, "suit": "H" }, { "name": "A", "id": 39, "suit": "S" }, { "name": "6", "id": 5, "suit": "H" }, { "name": "7", "id": 99, "suit": "S" }, { "name": "Q", "id": 132, "suit": "D" }, { "name": "A", "id": 13, "suit": "D" }, { "name": "7", "id": 114, "suit": "H" }, { "name": "7", "id": 6, "suit": "H" }, { "name": "Q", "id": 11, "suit": "H" }, { "name": "5", "id": 43, "suit": "S" }, { "name": "Q", "id": 50, "suit": "S" }, { "name": "4", "id": 57, "suit": "H" }, { "name": "8", "id": 74, "suit": "D" }, { "name": "8", "id": 20, "suit": "D" }, { "name": "J", "id": 160, "suit": null }, { "name": "6", "id": 85, "suit": "C" }, { "name": "K", "id": 92, "suit": "C" }, { "name": "K", "id": 25, "suit": "D" }, { "name": "2", "id": 94, "suit": "S" }, { "name": "J", "id": 23, "suit": "D" }, { "name": "3", "id": 41, "suit": "S" }, { "name": "10", "id": 102, "suit": "S" }, { "name": "J", "id": 157, "suit": "S" }, { "name": "9", "id": 101, "suit": "S" }, { "name": "4", "id": 42, "suit": "S" }, { "name": "2", "id": 1, "suit": "H" }, { "name": "10", "id": 117, "suit": "H" }, { "name": "A", "id": 147, "suit": "S" }, { "name": "6", "id": 152, "suit": "S" }, { "name": "6", "id": 98, "suit": "S" }, { "name": "3", "id": 69, "suit": "D" }, { "name": "J", "id": 36, "suit": "C" }, { "name": "K", "id": 120, "suit": "H" }, { "name": "7", "id": 32, "suit": "C" }, { "name": "4", "id": 137, "suit": "C" }, { "name": "8", "id": 115, "suit": "H" }, { "name": "J", "id": 52, "suit": null }, { "name": "6", "id": 139, "suit": "C" }, { "name": "J", "id": 144, "suit": "C" }, { "name": "4", "id": 70, "suit": "D" }, { "name": "A", "id": 121, "suit": "D" }, { "name": "5", "id": 97, "suit": "S" }, { "name": "6", "id": 113, "suit": "H" }, { "name": "J", "id": 64, "suit": "H" }, { "name": "10", "id": 63, "suit": "H" }, { "name": "8", "id": 46, "suit": "S" }, { "name": "3", "id": 28, "suit": "C" }, { "name": "6", "id": 31, "suit": "C" }], "state": { "activePlayerName": "Mark", "firstPlayer": "p-869-5b6", "ready": true, "playerOut": "p-869-5b6", "shuffled": true, "activePlayer": "p-869-5b6", "teamsReady": true, "activePlayerInFoot": true }, "created": 1586110960581, "playOrder": ["p-869-5b6", "p-995-09f"] }, { "gameId": "123-456", "subId": "o-4d5-1ea", "connectionId": "KiKizelkiYcAbeQ=" }, { "subId": "p-869-5b6", "gameId": "123-456", "partner": "p-995-09f", "teamIdx": 0, "teamid": "t-a07-60a", "name": "Mark", "connectionId": "KiKhhelWCYcAbeQ=", "foot": [], "didDraw": false, "inFoot": true, "hand": [] }, { "subId": "p-995-09f", "gameId": "123-456", "partner": "p-869-5b6", "teamIdx": 0, "teamid": "t-a07-60a", "name": "Bob", "connectionId": "KiKiFeL8CYcCIlw=", "foot": [], "didDraw": false, "inFoot": true, "hand": [{ "name": "Q", "id": 158, "suit": "S" }, { "name": "Q", "id": 24, "suit": "D" }] }, { "subId": "t-a07-60a", "gameId": "123-456", "score": 0, "cards": { "4": { "played": [{ "name": "4", "id": 111, "suit": "H" }, { "name": "4", "id": 150, "suit": "S" }, { "name": "2", "id": 55, "suit": "H" }, { "name": "4", "id": 96, "suit": "S" }, { "name": "4", "id": 3, "suit": "H" }, { "name": "4", "id": 124, "suit": "D" }, { "name": "4", "id": 16, "suit": "D" }, { "name": "4", "id": 83, "suit": "C" }], "staged": [] }, "5": { "played": [{ "name": "5", "id": 125, "suit": "D" }, { "name": "5", "id": 151, "suit": "S" }, { "name": "5", "id": 84, "suit": "C" }, { "name": "5", "id": 138, "suit": "C" }, { "name": "5", "id": 112, "suit": "H" }, { "name": "5", "id": 17, "suit": "D" }, { "name": "5", "id": 58, "suit": "H" }, { "name": "5", "id": 30, "suit": "C" }, { "name": "5", "id": 71, "suit": "D" }], "staged": [] }, "6": { "played": [{ "name": "6", "id": 126, "suit": "D" }, { "name": "6", "id": 44, "suit": "S" }, { "name": "6", "id": 59, "suit": "H" }], "staged": [] }, "7": { "played": [{ "name": "7", "id": 153, "suit": "S" }, { "name": "7", "id": 86, "suit": "C" }, { "name": "7", "id": 19, "suit": "D" }, { "name": "7", "id": 45, "suit": "S" }, { "name": "7", "id": 127, "suit": "D" }, { "name": "7", "id": 140, "suit": "C" }, { "name": "J", "id": 106, "suit": null }], "staged": [] }, "8": { "played": [{ "name": "8", "id": 33, "suit": "C" }, { "name": "8", "id": 87, "suit": "C" }, { "name": "2", "id": 148, "suit": "S" }], "staged": [] }, "9": { "played": [{ "name": "9", "id": 47, "suit": "S" }, { "name": "9", "id": 8, "suit": "H" }, { "name": "9", "id": 21, "suit": "D" }, { "name": "9", "id": 88, "suit": "C" }, { "name": "9", "id": 34, "suit": "C" }, { "name": "9", "id": 62, "suit": "H" }, { "name": "9", "id": 142, "suit": "C" }, { "name": "9", "id": 75, "suit": "D" }, { "name": "9", "id": 116, "suit": "H" }, { "name": "9", "id": 155, "suit": "S" }], "staged": [] }, "10": { "played": [{ "name": "10", "id": 9, "suit": "H" }, { "name": "10", "id": 130, "suit": "D" }, { "name": "2", "id": 135, "suit": "C" }, { "name": "10", "id": 22, "suit": "D" }, { "name": "10", "id": 35, "suit": "C" }, { "name": "2", "id": 122, "suit": "D" }, { "name": "2", "id": 81, "suit": "C" }, { "name": "10", "id": 76, "suit": "D" }], "staged": [] }, "Q": { "played": [{ "name": "Q", "id": 37, "suit": "C" }, { "name": "Q", "id": 104, "suit": "S" }, { "name": "J", "id": 161, "suit": null }], "staged": [] }, "A": { "played": [{ "name": "A", "id": 26, "suit": "C" }, { "name": "A", "id": 93, "suit": "S" }, { "name": "2", "id": 109, "suit": "H" }, { "name": "A", "id": 134, "suit": "C" }, { "name": "2", "id": 68, "suit": "D" }], "staged": [] }, "W": { "played": [], "staged": [] }, "J": { "played": [], "staged": [] }, "K": { "played": [{ "name": "K", "id": 133, "suit": "D" }, { "name": "K", "id": 38, "suit": "C" }, { "name": "2", "id": 27, "suit": "C" }, { "name": "K", "id": 66, "suit": "H" }, { "name": "K", "id": 79, "suit": "D" }, { "name": "K", "id": 105, "suit": "S" }, { "name": "K", "id": 51, "suit": "S" }, { "name": "K", "id": 146, "suit": "C" }, { "name": "K", "id": 12, "suit": "H" }], "staged": [] } }, "scores": [], "index": 0, "cardCt": [0, 2], "playerNames": ["Mark", "Bob"], "playerIds": ["p-869-5b6", "p-995-09f"], "melded": true, "inFoot": ["p-995-09f", "p-869-5b6"] }];
    // await game.setGameData(d);

    /** UPDATE SCORES */
    // eventData = { "message": "doaction", "game": "123-456", "userid": "p-869-5b6", "action": "updateScores", "value": null };
    // await game.updateScores(eventData.game);
    // var players = await player.getAll(eventData.game);
    // postDatas = [];
    // for (var i = 0, ct = players.length; i < ct; i++) {
    //     postDatas.push({ "info": "playerInfo", "to": players[i].userid, "data": player });
    // }
    // var teams = await team.getAll(eventData.game);
    // postDatas.push({ "info": "teams", "to": "all", "data": teams });
    // var state = await game.getState(eventData.game);
    // postDatas.push({ "info": "state", "to": "all", "data": state });


    // eventData = { "message": "doaction", "game": "123-456", "userid": "p-bee-c94", "action": "play", "value": { "4": { "played": [], "staged": [] }, "5": { "played": [{ "name": "5", "id": 125, "suit": "D" }, { "name": "5", "id": 138, "suit": "C" }, { "name": "5", "id": 4, "suit": "H" }], "staged": [] }, "6": { "played": [], "staged": [] }, "7": { "played": [], "staged": [] }, "8": { "played": [{ "name": "8", "id": 115, "suit": "H" }, { "name": "8", "id": 87, "suit": "C" }, { "name": "2", "id": 81, "suit": "C" }], "staged": [] }, "9": { "played": [], "staged": [] }, "10": { "played": [], "staged": [] }, "Q": { "played": [], "staged": [] }, "A": { "played": [{ "name": "A", "id": 134, "suit": "C" }, { "name": "A", "id": 93, "suit": "S" }, { "name": "A", "id": 54, "suit": "H" }], "staged": [] }, "W": { "played": [], "staged": [] }, "J": { "played": [], "staged": [{ "name": "J", "id": 77, "suit": "D" }, { "name": "J", "id": 157, "suit": "S" }, { "name": "J", "id": 36, "suit": "C" }] }, "K": { "played": [], "staged": [] } } };
    // var hand = await player.play(eventData.game, eventData.userid, eventData.value)
    // postDatas = [{ "info": "playerHand", "to": eventData.userid, "data": hand }];
    // var t = await team.getByPlayer(eventData.game, eventData.userid);
    // postDatas.push({ "info": "team", "to": "all", "data": t });
    // console.log(postDatas);

    // eventData = { "message": "doaction", "game": "debug", "action": "_GET_GAMES_" };
    // var games = await game.getGames();
    // postDatas = [{ "info": "_games_", "to": "all", "data": games }];
    // console.log(postDatas);

    // eventData = { "message": "doaction", "game": "debug", "userid": "o-debug", "action": "_DELETE_GAME_", "value": "123-456" };
    // await game.deleteGameData(eventData.value);
    // postDatas = [{ "info": "_game_deleted_", "to": "all", "data": eventData.value + " DELETED!" }];
    // console.log(postDatas);

    // eventData = { "message": "doaction", "game": "fa0-6b7", "userid": "p-c9e-0bd", "action": "saveTeams", "value": [{ "index": 0, "teamid": "t-ab7-bf1", "ids": [{ "index": 0, "id": "p-c9e-0bd" }] }, { "index": 1, "teamid": "t-1a9-09b", "ids": [{ "index": 0, "id": "p-cd8-d0d" }] }] };
    // var teams = await team.save(eventData.game, eventData.value);
    // postDatas = [{ "info": "teams", "to": "all", "data": teams }];
    // var state = await game.getState(eventData.game);
    // postDatas.push({ "info": "state", "to": "all", "data": state });

    // wss://l6xhw95zuk.execute-api.us-east-2.amazonaws.com/Prod?game=48b-697&action=test
    var gameId = "163-119";
    var userId;
    var connectionId;
    var name;
    //var action = "test";
    //await game.connect(gameId, userId, connectionId, name, action);
    //console.log(await action.doAction({"message":"doaction","game":"023-500","userid":"p-281-974","action":"getScores"}));
    setTimeout(async function(){
        var tables = await game.getGameData(gameId);
        console.log(tables);

        //await game.shuffle(gameId);
        // var rslt = await action.doAction({"message":"doaction","game":"224-812","userid":"p-690-435","action":"discard","value":{"name":"7","id":73,"suit":"D","idx":55}});
        // console.log(rslt);
        // await game.getConnections("224-812");
        
        // {"message":"doaction","game":"debug","userid":"o-debug","action":"_GET_GAMES_"}

        // var event = {
        //     body: '{"message":"doaction","game":"224-812","userid":"p-690-435","action":"discard","value":{"name":"7","id":73,"suit":"D","idx":55}}',
        //     requestContext:{
        //         domainName: "l6xhw95zuk.execute-api.us-east-2.amazonaws.com",
        //         stage: "Prod"
        //     }
        // };
        // var rslt = await doaction.handler(event);
        // console.log(rslt);

        // await action.doAction({"message":"doaction","game":"629-636","userid":"p-778-006","action":"discard","value":{"name":"3","id":123,"suit":"D","idx":66}});

        // await action.doAction({"message":"doaction","game":"629-636","userid":"p-240-643","action":"discard","value":{"name":"3","id":136,"suit":"C","idx":34}});
    }, 1000);
}

doTest();